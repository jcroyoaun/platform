{{define "page:title"}}Restablecer Contrase√±a | TotalComp MX{{end}}

{{define "page:main"}}
<div style="min-height: 80vh; display: flex; align-items: center; justify-content: center; padding: 2rem; box-sizing: border-box;">
    <div style="width: 100%; max-width: 450px;">
        <!-- Logo/Branding -->
        <div style="text-align: center; margin-bottom: 2rem;">
            <div style="font-size: 3rem; margin-bottom: 0.5rem;">üîë</div>
            <h1 style="color: white; font-size: 1.75rem; font-weight: 700; margin: 0 0 0.5rem 0;">
                Restablecer Contrase√±a
            </h1>
            <p style="color: #94a3b8; font-size: 0.875rem; margin: 0;">
                Ingresa tu nueva contrase√±a
            </p>
        </div>

        <!-- Reset Card -->
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); border: 1px solid #334155;">
            <!-- Global Error Message -->
            {{if .Form.Validator.HasErrors}}
            <div style="background: #fee2e2; border-left: 4px solid #ef4444; padding: 1rem; border-radius: 6px; margin-bottom: 1.5rem;">
                <p style="color: #991b1b; font-weight: 600; margin: 0 0 0.25rem 0; font-size: 0.875rem;">
                    ‚ö†Ô∏è Error en el formulario
                </p>
                <p style="color: #7f1d1d; margin: 0; font-size: 0.75rem;">
                    Por favor verifica los campos marcados en rojo.
                </p>
            </div>
            {{end}}

            <form method="POST">
                <input type='hidden' name='csrf_token' value='{{.CSRFToken}}'>
                
                <!-- Password Field -->
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; color: #f8fafc; font-weight: 600; margin-bottom: 0.5rem; font-size: 0.875rem;">
                        üîí Nueva Contrase√±a
                    </label>
                    <input 
                        type="password" 
                        name="NewPassword"
                        placeholder="M√≠nimo 8 caracteres"
                        style="width: 100%; padding: 0.75rem; background: #0f172a; border: 2px solid {{if .Form.Validator.FieldErrors.NewPassword}}#ef4444{{else}}#334155{{end}}; border-radius: 8px; color: #f8fafc; font-size: 0.875rem; box-sizing: border-box; outline: none; transition: border-color 0.2s;"
                        onfocus="this.style.borderColor='#6366f1'"
                        onblur="this.style.borderColor='{{if .Form.Validator.FieldErrors.NewPassword}}#ef4444{{else}}#334155{{end}}'"
                        required
                        autofocus>
                    {{with .Form.Validator.FieldErrors.NewPassword}}
                    <p style="color: #ef4444; font-size: 0.75rem; margin: 0.5rem 0 0 0; font-weight: 500;">
                        ‚ùå {{.}}
                    </p>
                    {{end}}
                    <p style="color: #64748b; font-size: 0.7rem; margin: 0.5rem 0 0 0;">
                        Usa al menos 8 caracteres con letras y n√∫meros.
                    </p>
                </div>

                <!-- Submit Button -->
                <button 
                    type="submit"
                    style="width: 100%; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 0.875rem; border-radius: 8px; font-weight: 700; font-size: 1rem; cursor: pointer; box-shadow: 0 4px 6px rgba(16, 185, 129, 0.3); transition: transform 0.2s, box-shadow 0.2s; box-sizing: border-box;"
                    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 10px rgba(16, 185, 129, 0.4)'"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px rgba(16, 185, 129, 0.3)'">
                    ‚úÖ Restablecer Contrase√±a
                </button>
            </form>

            <!-- Security Info -->
            <div style="background: #ecfdf5; padding: 1rem; border-radius: 6px; margin-top: 1.5rem; border-left: 4px solid #10b981;">
                <p style="color: #065f46; font-size: 0.75rem; margin: 0; line-height: 1.6;">
                    <strong>üîí Seguridad:</strong> Tu contrase√±a ser√° encriptada y almacenada de forma segura.
                </p>
            </div>
        </div>

        <!-- Back to Login Link -->
        <div style="text-align: center; margin-top: 1.5rem;">
            <a href="/login" style="color: #64748b; text-decoration: none; font-size: 0.875rem; transition: color 0.2s;"
               onmouseover="this.style.color='#94a3b8'"
               onmouseout="this.style.color='#64748b'">
                ‚Üê Volver a login
            </a>
        </div>
    </div>
</div>
{{end}}
