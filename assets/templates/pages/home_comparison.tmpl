{{define "page:title"}}Compara Paquetes de Compensaci√≥n M√©xico 2025{{end}}

{{define "page:meta"}}
<meta name="page" content="home">
{{end}}

{{define "page:main"}}
<div style="width: 100%; padding: 1.5rem; box-sizing: border-box;">
    <!-- Header -->
    <div style="text-align: center; margin-bottom: 2rem;">
        <h1 style="font-size: 2.5rem; color: #2563eb; margin-bottom: 0.5rem; margin-top: 0;">
            üá≤üáΩ Compara Paquetes de Compensaci√≥n 2025
        </h1>
        <p style="font-size: 1.125rem; color: #64748b; margin: 0 0 0.5rem 0;">
            Compara ofertas laborales lado a lado ‚Ä¢ Sueldos y Salarios vs RESICO
        </p>
        <p style="font-size: 0.875rem; color: #64748b; margin: 0;">
            ¬øVale m√°s $170k RESICO sin prestaciones o $150k con aguinaldo y vacaciones? Desc√∫brelo aqu√≠.
        </p>
    </div>

    <!-- Comparison Container -->
    <form action="/" method="POST" novalidate>
        <input type='hidden' name='csrf_token' value='{{.CSRFToken}}'>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
            
            <!-- Package 1 -->
            <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 3px solid #3b82f6;">
                <div style="margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 2px solid #e2e8f0;">
                    <input type="text" name="PackageName[]" placeholder="Nombre del paquete" value="{{index .Form.PackageNames 0}}" style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1rem; font-weight: 600; color: #1e293b;">
                </div>

                <!-- Regime -->
                <div style="margin-bottom: 1rem;">
                    <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #1e293b; font-size: 0.875rem;">
                        üìã R√©gimen Fiscal
                    </label>
                    <select name="Regime[]" onchange="toggleRegime(this, 0)" style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 0.875rem; background: white; cursor: pointer;">
                        <option value="sueldos_salarios">Sueldos y Salarios</option>
                        <option value="resico">RESICO</option>
                    </select>
                </div>

                <!-- Salary -->
                <div style="margin-bottom: 1rem;">
                    <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #1e293b; font-size: 0.875rem;">
                        üí∞ Salario Mensual Bruto
                    </label>
                    <input type="text" name="GrossMonthlySalary[]" placeholder="Ej: 150,000" style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1rem;">
                </div>

                <!-- Benefits Section (for Sueldos) -->
                <div class="benefits-section-0" style="background: #f8fafc; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <div style="font-size: 0.875rem; font-weight: 600; color: #1e293b; margin-bottom: 0.75rem;">üéÅ Prestaciones</div>
                    
                    <label style="display: flex; align-items: center; margin-bottom: 0.5rem; cursor: pointer; font-size: 0.875rem;">
                        <input type="checkbox" name="HasAguinaldo[]" value="0" checked style="margin-right: 0.5rem;">
                        Aguinaldo <input type="number" name="AguinaldoDays[]" value="15" min="15" max="30" style="width: 60px; padding: 0.25rem; margin-left: 0.5rem; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.75rem;"> d√≠as
                    </label>

                    <label style="display: flex; align-items: center; margin-bottom: 0.5rem; cursor: pointer; font-size: 0.875rem;">
                        <input type="checkbox" name="HasValesDespensa[]" value="0" checked style="margin-right: 0.5rem;">
                        Vales $<input type="number" name="ValesDespensaAmount[]" value="3439" min="0" step="1" style="width: 80px; padding: 0.25rem; margin-left: 0.5rem; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.75rem;"> /mes
                    </label>

                    <label style="display: flex; align-items: center; margin-bottom: 0.5rem; cursor: pointer; font-size: 0.875rem;">
                        <input type="checkbox" name="HasPrimaVacacional[]" value="0" checked style="margin-right: 0.5rem;">
                        Prima Vac. <input type="number" name="VacationDays[]" value="12" min="12" style="width: 50px; padding: 0.25rem; margin-left: 0.5rem; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.75rem;"> d√≠as @ <input type="number" name="PrimaVacacionalPercent[]" value="25" min="25" style="width: 50px; padding: 0.25rem; margin-left: 0.25rem; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.75rem;">%
                    </label>

                    <label style="display: flex; align-items: center; cursor: pointer; font-size: 0.875rem;">
                        <input type="checkbox" name="HasFondoAhorro[]" value="0" checked style="margin-right: 0.5rem;">
                        Fondo de Ahorro <input type="number" name="FondoAhorroPercent[]" value="13" min="1" max="13" step="0.1" style="width: 50px; padding: 0.25rem; margin-left: 0.5rem; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.75rem;">%
                    </label>
                </div>
            </div>

            <!-- Package 2 -->
            <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 3px solid #8b5cf6;">
                <div style="margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 2px solid #e2e8f0;">
                    <input type="text" name="PackageName[]" placeholder="Nombre del paquete (ej: Tu trabajo actual)" value="{{index .Form.PackageNames 1}}" style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1rem; font-weight: 600; color: #1e293b;">
                </div>

                <!-- Regime -->
                <div style="margin-bottom: 1rem;">
                    <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #1e293b; font-size: 0.875rem;">
                        üìã R√©gimen Fiscal
                    </label>
                    <select name="Regime[]" onchange="toggleRegime(this, 1)" style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 0.875rem; background: white; cursor: pointer;">
                        <option value="sueldos_salarios">Sueldos y Salarios</option>
                        <option value="resico" selected>RESICO</option>
                    </select>
                </div>

                <!-- Salary -->
                <div style="margin-bottom: 1rem;">
                    <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #1e293b; font-size: 0.875rem;">
                        üí∞ Salario Mensual Bruto
                    </label>
                    <input type="text" name="GrossMonthlySalary[]" placeholder="Ej: 170,000" style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1rem;">
                </div>

                <!-- Benefits Section (for Sueldos) -->
                <div class="benefits-section-1" style="display: none; background: #f8fafc; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <div style="font-size: 0.875rem; font-weight: 600; color: #1e293b; margin-bottom: 0.75rem;">üéÅ Prestaciones</div>
                    
                    <label style="display: flex; align-items: center; margin-bottom: 0.5rem; cursor: pointer; font-size: 0.875rem;">
                        <input type="checkbox" name="HasAguinaldo[]" value="1" style="margin-right: 0.5rem;">
                        Aguinaldo <input type="number" name="AguinaldoDays[]" value="15" min="15" max="30" style="width: 60px; padding: 0.25rem; margin-left: 0.5rem; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.75rem;"> d√≠as
                    </label>

                    <label style="display: flex; align-items: center; margin-bottom: 0.5rem; cursor: pointer; font-size: 0.875rem;">
                        <input type="checkbox" name="HasValesDespensa[]" value="1" style="margin-right: 0.5rem;">
                        Vales $<input type="number" name="ValesDespensaAmount[]" value="3439" min="0" step="1" style="width: 80px; padding: 0.25rem; margin-left: 0.5rem; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.75rem;"> /mes
                    </label>

                    <label style="display: flex; align-items: center; margin-bottom: 0.5rem; cursor: pointer; font-size: 0.875rem;">
                        <input type="checkbox" name="HasPrimaVacacional[]" value="1" style="margin-right: 0.5rem;">
                        Prima Vac. <input type="number" name="VacationDays[]" value="12" min="12" style="width: 50px; padding: 0.25rem; margin-left: 0.5rem; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.75rem;"> d√≠as @ <input type="number" name="PrimaVacacionalPercent[]" value="25" min="25" style="width: 50px; padding: 0.25rem; margin-left: 0.25rem; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.75rem;">%
                    </label>

                    <label style="display: flex; align-items: center; cursor: pointer; font-size: 0.875rem;">
                        <input type="checkbox" name="HasFondoAhorro[]" value="1" style="margin-right: 0.5rem;">
                        Fondo de Ahorro <input type="number" name="FondoAhorroPercent[]" value="13" min="1" max="13" step="0.1" style="width: 50px; padding: 0.25rem; margin-left: 0.5rem; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.75rem;">%
                    </label>
                </div>

                <div style="background: #fef3c7; padding: 0.75rem; border-radius: 6px; font-size: 0.75rem; color: #92400e;">
                    <strong>RESICO:</strong> Sin prestaciones tradicionales. Solo salario base + otras prestaciones mensuales.
                </div>
            </div>

        </div>

        <!-- Submit Button -->
        <div style="text-align: center; margin-bottom: 2rem;">
            <button type="submit" style="background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%); color: white; padding: 1rem 3rem; border: none; border-radius: 8px; font-size: 1.25rem; font-weight: 700; cursor: pointer; box-shadow: 0 4px 6px rgba(37, 99, 235, 0.4);">
                üîç Comparar Paquetes
            </button>
        </div>
    </form>

    <!-- Results Section -->
    {{if .Results}}
    <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dbeafe 100%); padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 2rem;">
        <h2 style="text-align: center; color: #059669; margin-bottom: 2rem; font-size: 2rem;">
            üìä Comparaci√≥n de Resultados
        </h2>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem;">
            
            {{range $idx, $result := .Results}}
            <div style="background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                <h3 style="color: #2563eb; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 2px solid #e2e8f0;">
                    {{if $result.PackageName}}{{$result.PackageName}}{{else}}Paquete {{add $idx 1}}{{end}}
                </h3>

                <!-- Key Metrics -->
                <div style="background: #eff6ff; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; text-align: center;">
                    <div style="font-size: 0.875rem; color: #64748b; margin-bottom: 0.25rem;">üí∞ Neto Mensual</div>
                    <div style="font-size: 1.75rem; font-weight: 700; color: #2563eb;">
                        ${{formatFloat $result.NetSalary 2}}
                    </div>
                </div>

                <div style="background: #f0fdf4; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; text-align: center;">
                    <div style="font-size: 0.875rem; color: #64748b; margin-bottom: 0.25rem;">üìÖ Neto Anual</div>
                    <div style="font-size: 1.5rem; font-weight: 700; color: #059669;">
                        ${{formatFloat $result.YearlyNet 2}}
                    </div>
                </div>

                <div style="background: #fef3c7; padding: 1rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 0.875rem; color: #64748b; margin-bottom: 0.25rem;">‚ú® Mensual Ajustado</div>
                    <div style="font-size: 1.25rem; font-weight: 700; color: #92400e;">
                        ${{formatFloat $result.MonthlyAdjusted 2}}
                    </div>
                    <div style="font-size: 0.75rem; color: #64748b; margin-top: 0.25rem;">(Incluye prestaciones anuales)</div>
                </div>

                <!-- Details -->
                <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 2px solid #e2e8f0; font-size: 0.875rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span style="color: #64748b;">Salario Bruto:</span>
                        <span style="font-weight: 600;">${{formatFloat $result.GrossSalary 2}}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; color: #ef4444;">
                        <span>(-) ISR:</span>
                        <span style="font-weight: 600;">-${{formatFloat $result.ISRTax 2}}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; color: #ef4444;">
                        <span>(-) IMSS:</span>
                        <span style="font-weight: 600;">-${{formatFloat $result.IMSSWorker 2}}</span>
                    </div>
                    {{if $result.ValesDespensaMonthly}}
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; color: #059669;">
                        <span>(+) Vales:</span>
                        <span style="font-weight: 600;">+${{formatFloat $result.ValesDespensaMonthly 2}}</span>
                    </div>
                    {{end}}
                </div>
            </div>
            {{end}}

        </div>

        <!-- Winner Highlight -->
        <div style="margin-top: 2rem; padding: 1.5rem; background: white; border-radius: 10px; border: 3px solid #059669; text-align: center;">
            <div style="font-size: 1.5rem; font-weight: 700; color: #059669; margin-bottom: 0.5rem;">
                üèÜ Mejor Opci√≥n: {{.BestPackage.PackageName}}
            </div>
            <div style="font-size: 1rem; color: #64748b;">
                Neto Anual: ${{formatFloat .BestPackage.YearlyNet 2}} ‚Ä¢ Mensual Ajustado: ${{formatFloat .BestPackage.MonthlyAdjusted 2}}
            </div>
        </div>
    </div>
    {{end}}

    <!-- Info Box -->
    <div style="background: #eff6ff; border-left: 4px solid #2563eb; padding: 1.25rem; border-radius: 8px; font-size: 0.875rem; color: #1e40af;">
        <strong>üí° Tip:</strong> El "Mensual Ajustado" incluye las prestaciones anuales divididas entre 12 meses. Es una mejor m√©trica para comparar tu poder adquisitivo real.
    </div>
</div>

<script>
function toggleRegime(select, index) {
    const benefitsSection = document.querySelector(`.benefits-section-${index}`);
    if (select.value === 'resico') {
        benefitsSection.style.display = 'none';
        // Uncheck all benefits
        benefitsSection.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
    } else {
        benefitsSection.style.display = 'block';
        // Check all benefits by default
        benefitsSection.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = true);
    }
}

// Strip commas before form submission
document.addEventListener('DOMContentLoaded', function() {
    document.querySelector('form').addEventListener('submit', function(e) {
        const inputs = document.querySelectorAll('input[type="text"], input[type="number"]');
        inputs.forEach(input => {
            if (input.value) {
                input.value = input.value.replace(/,/g, '');
            }
        });
    });

    // Initialize regime states
    document.querySelectorAll('select[name="Regime[]"]').forEach((select, index) => {
        toggleRegime(select, index);
    });
});
</script>
{{end}}

